<node>
    <name>httpRequest</name>
    <method>
        <![CDATA[
private function {{method_name}}(): void
{
    $url = {{url}};
    $method = {{method}};
    $headers = {{headers}};
    $body = {{body}};
    
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_CUSTOMREQUEST, $method);
    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
    if ($body) {
        curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($body));
    }
    
    $response = curl_exec($ch);
    $statusCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    curl_close($ch);
    
    $this->context['{{output_key}}'] = json_decode($response, true);
}
        ]]>
    </method>
</node>

